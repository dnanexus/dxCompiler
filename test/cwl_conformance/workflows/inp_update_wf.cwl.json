{
  "$graph": [
    {
      "baseCommand": [
        "echo"
      ],
      "class": "CommandLineTool",
      "id": "#echo-file-tool.cwl",
      "inputs": [
        {
          "id": "#echo-file-tool.cwl/in",
          "inputBinding": {
            "position": 1
          },
          "type": "string"
        },
        {
          "id": "#echo-file-tool.cwl/name",
          "type": [
            "null",
            "string"
          ]
        }
      ],
      "outputs": [
        {
          "id": "#echo-file-tool.cwl/out",
          "outputBinding": {
            "glob": "out.txt"
          },
          "type": "File"
        }
      ],
      "stdout": "out.txt"
    },
    {
      "class": "Workflow",
      "id": "#main",
      "inputs": [],
      "outputs": [
        {
          "id": "#main/a",
          "outputSource": "#main/step3/output",
          "type": "int"
        },
        {
          "id": "#main/b",
          "outputSource": "#main/step4/output",
          "type": "int"
        }
      ],
      "steps": [
        {
          "id": "#main/step1",
          "in": [
            {
              "default": "3",
              "id": "#main/step1/in"
            }
          ],
          "out": [
            "#main/step1/out"
          ],
          "run": "#echo-file-tool.cwl"
        },
        {
          "id": "#main/step2",
          "in": [
            {
              "id": "#main/step2/r",
              "source": "#main/step1/out"
            }
          ],
          "out": [
            "#main/step2/out"
          ],
          "run": "#updateval_inplace.cwl"
        },
        {
          "id": "#main/step3",
          "in": [
            {
              "id": "#main/step3/file1",
              "source": "#main/step1/out"
            },
            {
              "id": "#main/step3/wait",
              "source": "#main/step2/out"
            }
          ],
          "out": [
            "#main/step3/output"
          ],
          "run": "#parseInt-tool.cwl"
        },
        {
          "id": "#main/step4",
          "in": [
            {
              "id": "#main/step4/file1",
              "source": "#main/step2/out"
            }
          ],
          "out": [
            "#main/step4/output"
          ],
          "run": "#parseInt-tool.cwl"
        }
      ]
    },
    {
      "class": "ExpressionTool",
      "expression": "$({'output': parseInt(inputs.file1.contents)})",
      "id": "#parseInt-tool.cwl",
      "inputs": [
        {
          "id": "#parseInt-tool.cwl/file1",
          "loadContents": true,
          "type": "File"
        }
      ],
      "outputs": [
        {
          "id": "#parseInt-tool.cwl/output",
          "type": "int"
        }
      ],
      "requirements": [
        {
          "class": "InlineJavascriptRequirement"
        }
      ]
    },
    {
      "arguments": [
        "python",
        "$(inputs.script)",
        "$(inputs.r.basename)"
      ],
      "class": "CommandLineTool",
      "hints": [
        {
          "class": "DockerRequirement",
          "dockerPull": "python:2.7.15-alpine3.7"
        }
      ],
      "id": "#updateval_inplace.cwl",
      "inputs": [
        {
          "id": "#updateval_inplace.cwl/r",
          "type": "File"
        },
        {
          "default": {
            "class": "File",
            "location": "dx://project-Fy9QqgQ0yzZbg9KXKP4Jz6Yq:/test_data/cwl/updateval.py"
          },
          "id": "#updateval_inplace.cwl/script",
          "type": "File"
        }
      ],
      "outputs": [
        {
          "id": "#updateval_inplace.cwl/out",
          "outputBinding": {
            "glob": "$(inputs.r.basename)"
          },
          "type": "File"
        }
      ],
      "requirements": [
        {
          "class": "InitialWorkDirRequirement",
          "listing": [
            {
              "entry": "$(inputs.r)",
              "writable": true
            }
          ]
        },
        {
          "class": "InplaceUpdateRequirement",
          "inplaceUpdate": true
        }
      ]
    }
  ],
  "cwlVersion": "v1.2"
}
