{
  "$graph": [
    {
      "arguments": [
        {
          "position": 1,
          "valueFrom": "input.txt"
        }
      ],
      "baseCommand": "python",
      "class": "CommandLineTool",
      "hints": [
        {
          "class": "DockerRequirement",
          "dockerPull": "python:2-slim"
        }
      ],
      "id": "#index",
      "inputs": [
        {
          "id": "#index/file",
          "type": "File"
        },
        {
          "default": {
            "class": "File",
            "location": "dx://project-Fy9QqgQ0yzZbg9KXKP4Jz6Yq:/test_data/cwl/index.py"
          },
          "id": "#index/index.py",
          "inputBinding": {
            "position": 0
          },
          "type": "File"
        },
        {
          "id": "#index/secondfile",
          "type": "File"
        }
      ],
      "outputs": [
        {
          "id": "#index/result",
          "outputBinding": {
            "glob": "input.txt"
          },
          "secondaryFiles": [
            {
              "pattern": ".idx1",
              "required": null
            },
            {
              "pattern": "^.idx2",
              "required": null
            },
            {
              "pattern": "$(self.basename).idx3",
              "required": null
            },
            {
              "pattern": "${ return self.basename+\".idx4\"; }",
              "required": null
            },
            {
              "pattern": "$({\"path\": self.path+\".idx5\", \"class\": \"File\"})",
              "required": null
            },
            {
              "pattern": "$(self.nameroot).idx6$(self.nameext)",
              "required": null
            },
            {
              "pattern": "${ return [self.basename+\".idx7\", inputs.secondfile]; }",
              "required": null
            },
            {
              "pattern": "_idx8",
              "required": null
            }
          ],
          "type": "File"
        }
      ],
      "requirements": [
        {
          "class": "InitialWorkDirRequirement",
          "listing": [
            {
              "entry": "$(inputs.file)",
              "entryname": "input.txt"
            }
          ]
        },
        {
          "class": "InlineJavascriptRequirement"
        }
      ]
    },
    {
      "class": "Workflow",
      "id": "#main",
      "inputs": [
        {
          "id": "#main/infile",
          "type": "File"
        },
        {
          "id": "#main/secondfile",
          "type": "File"
        },
        {
          "id": "#main/term",
          "type": "string"
        }
      ],
      "outputs": [
        {
          "id": "#main/indexedfile",
          "outputSource": "#main/index/result",
          "type": "File"
        },
        {
          "id": "#main/outfile",
          "outputSource": "#main/search/result",
          "type": "File"
        }
      ],
      "steps": [
        {
          "id": "#main/index",
          "in": [
            {
              "id": "#main/index/file",
              "source": "#main/infile"
            },
            {
              "id": "#main/index/secondfile",
              "source": "#main/secondfile"
            }
          ],
          "out": [
            "#main/index/result"
          ],
          "run": "#index"
        },
        {
          "id": "#main/search",
          "in": [
            {
              "id": "#main/search/file",
              "source": "#main/index/result"
            },
            {
              "id": "#main/search/term",
              "source": "#main/term"
            }
          ],
          "out": [
            "#main/search/result"
          ],
          "run": "#search"
        }
      ]
    },
    {
      "baseCommand": "python",
      "class": "CommandLineTool",
      "hints": [
        {
          "class": "DockerRequirement",
          "dockerPull": "python:2-slim"
        }
      ],
      "id": "#search",
      "inputs": [
        {
          "id": "#search/file",
          "inputBinding": {
            "position": 1
          },
          "secondaryFiles": [
            {
              "pattern": ".idx1",
              "required": null
            },
            {
              "pattern": "^.idx2",
              "required": null
            },
            {
              "pattern": "$(self.basename).idx3",
              "required": null
            },
            {
              "pattern": "${ return self.basename+\".idx4\"; }",
              "required": null
            },
            {
              "pattern": "$(self.nameroot).idx6$(self.nameext)",
              "required": null
            },
            {
              "pattern": "${ return [self.basename+\".idx7\"]; }",
              "required": null
            },
            {
              "pattern": "_idx8",
              "required": null
            }
          ],
          "type": "File"
        },
        {
          "default": {
            "class": "File",
            "location": "dx://project-Fy9QqgQ0yzZbg9KXKP4Jz6Yq:/test_data/cwl/search.py"
          },
          "id": "#search/search.py",
          "inputBinding": {
            "position": 0
          },
          "type": "File"
        },
        {
          "id": "#search/term",
          "inputBinding": {
            "position": 2
          },
          "type": "string"
        }
      ],
      "outputs": [
        {
          "id": "#search/result",
          "outputBinding": {
            "glob": "result.txt"
          },
          "type": "File"
        }
      ],
      "requirements": [
        {
          "class": "InlineJavascriptRequirement"
        }
      ],
      "stdout": "result.txt"
    }
  ],
  "cwlVersion": "v1.2"
}
